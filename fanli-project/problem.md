
## 返利项目技术栈更新的问题


1. dist文件夹下文件会越来越多的问题

2. chunkhash 和 hash 来实现浏览器的长缓存 =》将vendor分开打包

3. 解决static过大的问题
    - 替换git 
    - 采用分项目结构，即引入新的开发流程

---

## 我对开发流程的一些想法

### 开发技术栈 
  - webpack   
  - vue 
  - ES6语法（可选）
  - css预处理器（可选）

### 开发大体流程 
 1. clone空的webpack+vue的基础架构，执行`npm install` 完成基础安装
 2. 在src下开发项目，并使用dev-server查看开发效果
 3. 开发完成后，提交 /src 和相对于的package.json .babel等文件
 4. 内测更新代码，执行build命令，进行测试
 5. 内测有问题，开发对 /src进行修改提交，内测再次执行build直到内测通过
 6. 内测通过，外测更新代码，并执行build命令，进行测试
 7. 外测有问题，开发对 /src进行修改提交，外测再次执行build直到外测通过
 8. 外测通过，直接将dist目录上传到生产环境

 注*
 > 4、6、8考虑使用自动化发布工具。

 > 外测替换dist文件夹名称，将dist改为对应项目的名称

 ### 几个需要考虑的问题

 - 如何引用并维护公共库？一些vendor库应该做全站的缓存且需要保证开发测试和生产的版本一致，故不能使用`npm install ***`直接安装线上最新版本。webpack如何共用依赖？

 - 项目的基本单位是什么，是否是一个小项目就需要简历一个单独的项目目录，以超返为例：1元领、O元抽、有料、好货、搜券是否需要建

 - 发布后域名如何指向，将dist文件命名成对应的文件名，统一放到一个固定的文件夹下，通过类似nginx的工具完成？
 > 如/super/h5/zeroget、 /super/h5/youliao 、/super/h5/haoguo。然后super.fanli.com/h5/指向 /super/h5 文件夹。
完成此步骤后，项目的域名定义将有前端完成，即根据前端文件夹名称完成。

 - 文件的替换为全量替换还是增量替换？
    - 全量替换是将版本hash放到项目dist文件夹名称中，这样不利于浏览器的缓存，每次都需要硬替换
    - 增量替换是将contenthash放入到文件名中，只替换修改过的文件。这样的问题是dist下的文件会增不加，一段时间后，多出的文件如何维护？











